function debug_log(p_Msg){apex.debug.info(p_Msg)}
function log_error(p_Msg){apex.debug.error(p_Msg)}
function show_loading_mark(pRegionId){var faLoader=$("<span></span>");faLoader.attr("id","loader"+pRegionId);faLoader.addClass("ct-loader");var faRefresh=$("<i></i>");faRefresh.addClass("fa fa-refresh fa-2x fa-anim-spin");faRefresh.css("background","rgba(121,121,121,0.6)");faRefresh.css("border-radius","100%");faRefresh.css("padding","15px");faRefresh.css("color","white");faLoader.append(faRefresh);$(pRegionId).append(faLoader)}
function stop_loader(pRegionId){$(pRegionId+" > .u-Processing").remove();$(pRegionId+" > .ct-loader").remove()}
function no_data_message(pRegionId,RegionTest,pIndicator){if(pIndicator=='show'){var div=$("<div></div>").css("margin","12px").css("text-align","center").css("padding","64px 0").addClass("nodatafoundmessage");var subDiv=$("<div></div>");var subDivSpan=$("<span></span>").addClass("fa").addClass("fa-search").addClass("fa-2x").css("height","32px").css("width","32px").css("color","#D0D0D0").css("margin-bottom","16px");subDiv.append(subDivSpan);var span=$("<span></span>").text(RegionTest).css("display","block").css("color","#707070").css("font-size","12px");div.append(subDiv).append(span);$(pRegionId).append(div)}else if(pIndicator=='hide'){$(pRegionId).children('.nodatafoundmessage').remove()}}
function drawContainer(parent){var div=$("<div></div>");div.addClass("apex-container");parent.append(div);return(div)}
function drawRow(parent){var div=$("<div></div>");div.addClass("apex-row");parent.append(div);return(div)}
function rippleEffect(pRippleClass){$("."+pRippleClass).click(function(e){$(".ripple").remove();var posX=$(this).offset().left,posY=$(this).offset().top,buttonWidth=$(this).width(),buttonHeight=$(this).height();$(this).append("<div class='ripple'></div>");if(buttonWidth>=buttonHeight){buttonHeight=buttonWidth}else{buttonWidth=buttonHeight}
var x=e.pageX-posX-buttonWidth/2;var y=e.pageY-posY-buttonHeight/2;$(".ripple").css({width:buttonWidth,height:buttonHeight,top:y+'px',left:x+'px'}).addClass("rippleEffect")})}
function renderHTML(pParentID,pData,pIcon,pCardsLength){var parent=$(pParentID);parent.parent().css("overflow","inherit");var container=drawContainer(parent);var row=drawRow(container);var cardNum=0;var zindex=10;var releaveHideIcon=pIcon;$.each(pData,function(idx,data){cardNum+=Number(pCardsLength);var cols=$("<div></div>");cols.addClass('apex-c-col-'+pCardsLength);var l_Cards=$("<div></div>");l_Cards.addClass("card");var l_Card_img=$("<div></div>");l_Card_img.addClass("card-image");rippleEffect('card');var l_CardImg=$("<img>");l_CardImg.addClass("img-responsive");l_CardImg.attr("src",data.IMG_SRC);l_Card_img.append(l_CardImg);l_Cards.append(l_Card_img);var card_content=$("<div></div>");card_content.addClass("card-content");var title_span=$("<span></span>");title_span.addClass("card-title");title_span.text(data.CARD_TITLE);card_content.append(title_span);var show_button_div=$("<span></span>");show_button_div.addClass("btn btn-custom pull-right");var show_button_div_icon=$("<i></i>");show_button_div_icon.addClass("fa fa-ellipsis-v");show_button_div.append(show_button_div_icon);card_content.append(show_button_div);var card_action=$("<div></div>");card_action.addClass("card-action");var card_action_link_left=$("<a></a>");card_action_link_left.addClass("card-action-link-left pull-left t-Button");var card_action_link_right=$('<a type="button"></a>');card_action_link_right.addClass("card-action-link-right pull-right t-Button t-Button--icon t-Button");var card_action_link_icon_right_label=$('<span class="t-Button-label">'+data.LINK_TEXT_R+'</span>');var card_action_link_icon_left_label=$('<span class="t-Button-label">'+data.LINK_TEXT_L+'</span>');var left_link_pos=data.LINK_ICON_POS_L;var right_link_pos=data.LINK_ICON_POS_R;right_link_pos=$.trim(right_link_pos);left_link_pos=$.trim(left_link_pos);if(left_link_pos!=''){var card_action_link_icon_left=$('<span  aria-hidden="true"></span>');card_action_link_icon_left.addClass('t-Icon t-Icon--'+left_link_pos+' fa '+data.LINK_ICON_L);if(left_link_pos=='left'){card_action_link_left.append(card_action_link_icon_left)}}
card_action_link_left.append(card_action_link_icon_left_label);if(left_link_pos!=''){var card_action_link_icon_left=$('<span  aria-hidden="true"></span>');card_action_link_icon_left.addClass('t-Icon t-Icon--'+left_link_pos+' fa '+data.LINK_ICON_L);if(left_link_pos=='right'){card_action_link_left.append(card_action_link_icon_left)}}
if(right_link_pos!=''){var card_action_link_icon_right=$('<span  aria-hidden="true"></span>');card_action_link_icon_right.addClass('t-Icon t-Icon--'+right_link_pos+' fa '+data.LINK_ICON_R);if(right_link_pos=='left'){card_action_link_right.append(card_action_link_icon_right)}}
card_action_link_right.append(card_action_link_icon_right_label);if(right_link_pos!=''){var card_action_link_icon_right=$('<span  aria-hidden="true"></span>');card_action_link_icon_right.addClass('t-Icon t-Icon--'+right_link_pos+' fa '+data.LINK_ICON_R);if(right_link_pos=='right'){card_action_link_right.append(card_action_link_icon_right)}}
card_action_link_left.css("color",'#'+data.LINK_FONT_L);card_action_link_left.css("background",data.LINK_BG_COLOR_L);card_action_link_right.css("color",'#'+data.LINK_FONT_R);card_action_link_right.css("background",data.LINK_BG_COLOR_R);card_action_link_left.attr("href",data.LINK_L);card_action_link_right.attr("href",data.LINK_R);card_action.append(card_action_link_left);card_action.append(card_action_link_right);var card_reveal=$("<div></div>");card_reveal.addClass("card-reveal");var card_reveal_title_wrap=$("<div></div>");card_reveal_title_wrap.addClass("card-title-wrap");var card_reveal_title=$("<span></span>");card_reveal_title.addClass("card-title");card_reveal_title.text(data.CARD_TITLE);var card_close_btn=$('<span ></span>');card_close_btn.addClass("close pull-right");var card_close_x=$('<i class="fa '+releaveHideIcon+'"></i>');card_close_btn.append(card_close_x);card_reveal_title.append(card_close_btn);card_reveal_title_wrap.append(card_reveal_title);card_reveal.append(card_reveal_title_wrap);var card_reveal_content=$("<div></div>");card_reveal_content.addClass("ashish_show_more_content");var card_reveal_content_para=$("<p></p>");card_reveal_content_para.html(data.REVEAL_CONTENT);card_reveal_content.append(card_reveal_content_para);card_reveal.append(card_reveal_content);l_Cards.append(card_content);l_Cards.append(card_action);l_Cards.append(card_reveal);cols.append(l_Cards);row.append(cols);if(cardNum>=12){row=drawRow(container);cardNum=0}
$(card_content).on('click',function(){var hasclass=$(this).next('div').next('div');if($(hasclass).hasClass('card-reveal')){$(hasclass).slideToggle(200)}});$(card_reveal_title_wrap).on('click',function(){var hasclass=$(this).parent('div');if($(hasclass).hasClass('card-reveal')){$(hasclass).slideToggle(200)}})})}
function prepareData(pParentID,pData,pNoDataFound,pIcon,pCardsLength){$(pParentID).empty();if(pData.row&&pData.row.length>0){renderHTML(pParentID,pData.row,pIcon,pCardsLength)}else{$(pParentID).css("min-height","");no_data_message(pParentID,pNoDataFound,'show')}
stop_loader(pParentID)}
function start_cards(regionID,ajaxID,noDataFoundMessage,items2Submit,pIcon,pCardsLength){var parentID="#"+regionID+"-p";function start_data_load(){$(parentID).css("min-height","120px");show_loading_mark(parentID);var submitItems=items2Submit;try{apex.server.plugin(ajaxID,{pageItems:submitItems},{success:function(pData){prepareData(parentID,pData,noDataFoundMessage,pIcon,pCardsLength)},error:function(d){log_error(d.responseText)},dataType:"json"})}catch(e){console.error("Ajex got fail");console.error(e)}}
start_data_load();try{apex.jQuery("#"+regionID).bind("apexrefresh",function(){start_data_load()})}catch(e){console.error("Error while try to bind APEX refresh event");console.error(e)}}